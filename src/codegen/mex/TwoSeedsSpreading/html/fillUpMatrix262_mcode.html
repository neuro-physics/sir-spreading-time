<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="71,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T6U3">M</span> = fillUpMatrix(<span class="var type1" id="S3T6U6">A</span>, <span class="var type1" id="S4T4U7">m</span>, <span class="var type2" id="S5T4V2U8">n</span>, <span class="var type1" id="S6T4U9">N</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="71,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">% M is a matrix m X n</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">% composed of A (top left corner)</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% if size(A) &gt; size(M), then A is trimmed to fit M</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">% if number of cols of A is less than n, then the remaining n-size(A,2) cols of each line of A are</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%       filled with randperm(N,n-size(A,2)) numbers not contained in the given line of A</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">% if number of rows of A is less than m, the matrix (with given corrections) is periodically</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%       repeated, one below each other.</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,9" id="srcline9"> 9</a></span><span class="line">    <span class="mxinfo " id="T4:U6">[<span class="var type1" id="S7T4U13">nr</span>,<span class="var type1" id="S8T4U14">nc</span>] = size(<span class="var type1" id="S3T6U17">A</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo " id="T4:U10"><span class="var type1" id="S10T4U20">mm</span> = <span class="mxinfo " id="T4:U12">min(<span class="var type1" id="S4T4U23">m</span>,<span class="var type1" id="S7T4U24">nr</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,11" id="srcline11">11</a></span><span class="line">    <span class="mxinfo " id="T4:U15"><span class="var type1" id="S12T4U27">nn</span> = <span class="mxinfo " id="T4:U17">min(<span class="var type1" id="S5T4U30">n</span>,<span class="var type1" id="S8T4U31">nc</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,12" id="srcline12">12</a></span><span class="line">    <span class="mxinfo " id="T6:U20"><span class="var type1" id="S2T6U34">M</span> = <span class="mxinfo " id="T6:U22">zeros(<span class="var type1" id="S4T4U37">m</span>,<span class="var type1" id="S5T4U38">n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,13" id="srcline13">13</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S14T4U41">i</span> = <span class="mxinfo " id="T4:U26">1</span>:<span class="var type1" id="S10T4U44">mm</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,14" id="srcline14">14</a></span><span class="line">        <span class="mxinfo " id="T19:U28"><span class="var type1" id="S15T19U47">r</span> = <span class="mxinfo " id="T19:U30"><span class="fcn" id="F246N27:B49">getRandPerm</span>(<span class="var type1" id="S6T4U50">N</span>, <span class="var type1" id="S5T4U52">n</span> - <span class="var type1" id="S12T4U53">nn</span>, <span class="mxinfo " id="T9:U34"><span class="var type1" id="S3T6U55">A</span>(<span class="var type1" id="S14T4U56">i</span>,<span class="mxinfo " id="T33:U37">1:<span class="var type1" id="S12T4U59">nn</span></span>)</span>)</span></span>; <span class="comment">% if n &lt; size(A,2), then r = []</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,15" id="srcline15">15</a></span><span class="line">        <span class="mxinfo " id="T9:U39"><span class="mxinfo " id="T9:U40"><span class="var type1" id="S2T6U63">M</span>(<span class="mxinfo " id="T4:U42"><span class="var type1" id="S14T4U64"><span class="potentialdiff PD3">i</span></span></span>,<span class="mxinfo " id="T33:U43">:</span>)</span> = [ <span class="mxinfo " id="T9:U44"><span class="var type1" id="S3T6U69">A</span>(<span class="var type1" id="S14T4U70">i</span>,<span class="mxinfo " id="T9:U47"><span class="mxinfo " id="T4:U48">1</span>:<span class="var type1" id="S12T4U73">nn</span></span>)</span>, <span class="var type1" id="S15T19U74">r</span> ]</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,16" id="srcline16">16</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,17" id="srcline17">17</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo " id="T15:U51"><span class="var type1" id="S4T4U79">m</span> &lt;= <span class="var type1" id="S7T4U80">nr</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="71,18" id="srcline18">18</a></span><span class="line">        <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,19" id="srcline19">19</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T4:U54"><span class="var type1" id="S17T4U84">k</span> = <span class="mxinfo " id="T4:U56">floor(<span class="mxinfo " id="T4:U57"><span class="var type1" id="S4T4U88">m</span> / <span class="var type1" id="S7T4U89">nr</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo " id="T6:U60"><span class="mxinfo " id="T6:U61"><span class="var type1" id="S2T6U93">M</span>(<span class="mxinfo " id="T5:U63"><span class="mxinfo " id="T4:U64">1</span>:(<span class="potentialdiff PD5"><span class="var type1" id="S17T4U98">k</span>*<span class="var type1" id="S7T4U99">nr</span></span>)</span>,<span class="mxinfo " id="T33:U67">:</span>)</span> = <span class="mxinfo " id="T6:U68">repmat(<span class="mxinfo " id="T6:U69"><span class="var type1" id="S2T6U104">M</span>(<span class="mxinfo " id="T5:U71"><span class="mxinfo " id="T4:U72">1</span>:<span class="var type1" id="S7T4U107">nr</span></span>,<span class="mxinfo " id="T33:U74">:</span>)</span>, <span class="var type1" id="S17T4U109">k</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T6:U76"><span class="mxinfo " id="T6:U77"><span class="var type1" id="S2T6U114">M</span>(<span class="mxinfo " id="T5:U79">(<span class="mxinfo " id="T4:U80"><span class="potentialdiff PD5"><span class="mxinfo " id="T4:U81"><span class="var type1" id="S17T4U119">k</span>*<span class="var type1" id="S7T4U120">nr</span></span>+<span class="mxinfo " id="T4:U84">1</span></span></span>):<span class="var type1" id="S4T4U122">m</span></span>,<span class="mxinfo " id="T33:U86">:</span>)</span> = <span class="mxinfo " id="T6:U87"><span class="var type1" id="S2T6U125">M</span>(<span class="mxinfo " id="T5:U89"><span class="mxinfo " id="T4:U90">1</span>:(<span class="mxinfo " id="T4:U91"><span class="potentialdiff PD5"><span class="var type1" id="S4T4U130">m</span>-<span class="mxinfo " id="T4:U93"><span class="var type1" id="S17T4U132">k</span>*<span class="var type1" id="S7T4U133">nr</span></span></span></span>)</span>,<span class="mxinfo " id="T33:U96">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="71,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="71,24" id="srcline24">24</a></span><span class="line"></span></span>
</pre>
<div class="dead">
<pre class="code">
<span class="srcline"><span class="lineno"><a href="71,25" id="srcline25">25</a></span><span class="line">function r = getRandPerm(N, m, x)</span></span>
<span class="srcline"><span class="lineno"><a href="71,26" id="srcline26">26</a></span><span class="line">    while true</span></span>
<span class="srcline"><span class="lineno"><a href="71,27" id="srcline27">27</a></span><span class="line">        r = randperm(N, m);</span></span>
<span class="srcline"><span class="lineno"><a href="71,28" id="srcline28">28</a></span><span class="line">        if isempty(intersect(r,sort(x)))</span></span>
<span class="srcline"><span class="lineno"><a href="71,29" id="srcline29">29</a></span><span class="line">            return;</span></span>
<span class="srcline"><span class="lineno"><a href="71,30" id="srcline30">30</a></span><span class="line">        end</span></span>
<span class="srcline"><span class="lineno"><a href="71,31" id="srcline31">31</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="71,32" id="srcline32">32</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="71,33" id="srcline33">33</a></span><span class="line"> </span></span>
</pre>
</div>
</body>
</html>
