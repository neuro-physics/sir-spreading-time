<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="100,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T2U3">M</span> = fillUpMatrix(<span class="var type1" id="S3T2U6">A</span>, <span class="var type1" id="S4T3U7">m</span>, <span class="var type1" id="S5T3U8">n</span>, <span class="var type1" id="S6T3U9">N</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="100,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">% M is a matrix m X n</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">% composed of A (top left corner)</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% if size(A) &gt; size(M), then A is trimmed to fit M</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">% if number of cols of A is less than n, then the remaining n-size(A,2) cols of each line of A are</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%       filled with randperm(N,n-size(A,2)) numbers not contained in the given line of A</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">% if number of rows of A is less than m, the matrix (with given corrections) is periodically</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%       repeated, one below each other.</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,9" id="srcline9"> 9</a></span><span class="line">    <span class="mxinfo " id="T3:U6">[<span class="var type1" id="S7T3U13">nr</span>,<span class="var type1" id="S8T3U14">nc</span>] = size(<span class="var type1" id="S3T2U17">A</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo " id="T3:U10"><span class="var type1" id="S10T3U20">mm</span> = <span class="mxinfo " id="T3:U12">min(<span class="var type1" id="S4T3U23">m</span>,<span class="var type1" id="S7T3U24">nr</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,11" id="srcline11">11</a></span><span class="line">    <span class="mxinfo " id="T3:U15"><span class="var type1" id="S12T3U27">nn</span> = <span class="mxinfo " id="T3:U17">min(<span class="var type1" id="S5T3U30">n</span>,<span class="var type1" id="S8T3U31">nc</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,12" id="srcline12">12</a></span><span class="line">    <span class="mxinfo " id="T2:U20"><span class="potentialdiff PD4"><span class="var type1" id="S2T2U34">M</span> = <span class="mxinfo " id="T2:U22">zeros(<span class="var type1" id="S4T3U37">m</span>,<span class="mxinfo " id="T3:U24"><span class="var type1" id="S5T3U38"><span class="potentialdiff PD4">n</span></span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,13" id="srcline13">13</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S14T3U41">i</span> = <span class="mxinfo " id="T3:U26">1</span>:<span class="var type1" id="S10T3U44">mm</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,14" id="srcline14">14</a></span><span class="line">        <span class="mxinfo " id="T8:U28"><span class="var type1" id="S15T8U47">r</span> = <span class="mxinfo " id="T8:U30"><span class="fcn" id="F346N20:B49">getRandPerm</span>(<span class="var type1" id="S6T3U50">N</span>, <span class="mxinfo " id="T3:U32"><span class="var type1" id="S5T3U52">n</span> - <span class="var type1" id="S12T3U53">nn</span></span>, <span class="mxinfo " id="T8:U35"><span class="var type1" id="S3T2U55">A</span>(<span class="var type1" id="S14T3U56">i</span>,<span class="mxinfo " id="T8:U38"><span class="mxinfo " id="T3:U39">1</span>:<span class="var type1" id="S12T3U59">nn</span></span>)</span>)</span></span>; <span class="comment">% if n &lt; size(A,2), then r = []</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,15" id="srcline15">15</a></span><span class="line">        <span class="mxinfo " id="T8:U41"><span class="mxinfo " id="T8:U42"><span class="var type1" id="S2T2U63">M</span>(<span class="mxinfo " id="T3:U44"><span class="var type1" id="S14T3U64"><span class="potentialdiff PD2">i</span></span></span>,<span class="mxinfo " id="T37:U45">:</span>)</span> = <span class="mxinfo " id="T8:U46">[ <span class="mxinfo " id="T8:U47"><span class="var type1" id="S3T2U69">A</span>(<span class="var type1" id="S14T3U70">i</span>,<span class="mxinfo " id="T8:U50"><span class="mxinfo " id="T3:U51">1</span>:<span class="var type1" id="S12T3U73">nn</span></span>)</span>, <span class="var type1" id="S15T8U74">r</span> ]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,16" id="srcline16">16</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,17" id="srcline17">17</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo " id="T9:U54"><span class="var type1" id="S4T3U79">m</span> &lt;= <span class="var type1" id="S7T3U80">nr</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="100,18" id="srcline18">18</a></span><span class="line">        <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,19" id="srcline19">19</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T3:U57"><span class="var type1" id="S17T3U84">k</span> = <span class="mxinfo " id="T3:U59">floor(<span class="mxinfo " id="T3:U60"><span class="var type1" id="S4T3U88">m</span> / <span class="var type1" id="S7T3U89">nr</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo " id="T2:U63"><span class="mxinfo " id="T2:U64"><span class="var type1" id="S2T2U93">M</span>(<span class="mxinfo " id="T8:U66"><span class="mxinfo " id="T3:U67">1</span>:(<span class="potentialdiff PD4"><span class="var type1" id="S17T3U98">k</span>*<span class="var type1" id="S7T3U99">nr</span></span>)</span>,<span class="mxinfo " id="T37:U70">:</span>)</span> = <span class="mxinfo " id="T2:U71">repmat(<span class="mxinfo " id="T72:U72"><span class="var type1" id="S2T2U104">M</span>(<span class="mxinfo " id="T8:U74"><span class="mxinfo " id="T3:U75">1</span>:<span class="var type1" id="S7T3U107">nr</span></span>,<span class="mxinfo " id="T37:U77">:</span>)</span>, <span class="var type1" id="S17T3U109">k</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T2:U79"><span class="mxinfo " id="T2:U80"><span class="var type1" id="S2T2U114">M</span>(<span class="mxinfo " id="T8:U82">(<span class="mxinfo " id="T3:U83"><span class="potentialdiff PD4"><span class="mxinfo " id="T3:U84"><span class="var type1" id="S17T3U119">k</span>*<span class="var type1" id="S7T3U120">nr</span></span>+<span class="mxinfo " id="T3:U87">1</span></span></span>):<span class="var type1" id="S4T3U122">m</span></span>,<span class="mxinfo " id="T37:U89">:</span>)</span> = <span class="mxinfo " id="T2:U90"><span class="var type1" id="S2T2U125">M</span>(<span class="mxinfo " id="T8:U92"><span class="mxinfo " id="T3:U93">1</span>:(<span class="mxinfo " id="T3:U94"><span class="potentialdiff PD4"><span class="var type1" id="S4T3U130">m</span>-<span class="mxinfo " id="T3:U96"><span class="var type1" id="S17T3U132">k</span>*<span class="var type1" id="S7T3U133">nr</span></span></span></span>)</span>,<span class="mxinfo " id="T37:U99">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,24" id="srcline24">24</a></span><span class="line"></span></span>
</pre>
<div class="dead">
<pre class="code">
<span class="srcline"><span class="lineno"><a href="100,25" id="srcline25">25</a></span><span class="line">function r = getRandPerm(N, m, x)</span></span>
<span class="srcline"><span class="lineno"><a href="100,26" id="srcline26">26</a></span><span class="line">    while true</span></span>
<span class="srcline"><span class="lineno"><a href="100,27" id="srcline27">27</a></span><span class="line">        r = randperm(N, m);</span></span>
<span class="srcline"><span class="lineno"><a href="100,28" id="srcline28">28</a></span><span class="line">        if isempty(intersect(r,sort(x)))</span></span>
<span class="srcline"><span class="lineno"><a href="100,29" id="srcline29">29</a></span><span class="line">            return;</span></span>
<span class="srcline"><span class="lineno"><a href="100,30" id="srcline30">30</a></span><span class="line">        end</span></span>
<span class="srcline"><span class="lineno"><a href="100,31" id="srcline31">31</a></span><span class="line">    end</span></span>
<span class="srcline"><span class="lineno"><a href="100,32" id="srcline32">32</a></span><span class="line">end</span></span>
<span class="srcline"><span class="lineno"><a href="100,33" id="srcline33">33</a></span><span class="line"> </span></span>
</pre>
</div>
</body>
</html>
